<script>

window.onload = function(){

const params = new URLSearchParams(window.location.search);
const id = params.get("id");

fetch("https://newsdonkey24-stack.github.io/puthiyaparvai-web/news.json")
.then(res => res.json())
.then(data => {

    if(!id){
        document.getElementById("content").innerHTML = "<h3>ID இல்லை</h3>";
        return;
    }

    const news = data.find(n => n.id && n.id === id);

    if(!news){
        document.getElementById("content").innerHTML = "<h3>செய்தி கிடைக்கவில்லை</h3>";
        return;
    }

    document.getElementById("title").innerText = news.title || "";
    document.getElementById("date").innerText = news.date || "";
    document.getElementById("category").innerText = news.category || "";
    document.getElementById("image").src = news.image || "";

    let views = localStorage.getItem(id) || 0;
    views++;
    localStorage.setItem(id, views);
    document.getElementById("views").innerText = views;

    if(news.content){
        const paragraphs = news.content.split("\n");
        let html = "";
        paragraphs.forEach(p=>{
            if(p.trim() !== ""){
                html += "<p>"+p+"</p>";
            }
        });
        document.getElementById("content").innerHTML = html;
    }

})
.catch(err=>{
    document.getElementById("content").innerHTML = "<h3>Error loading news</h3>";
});

};

</script>
